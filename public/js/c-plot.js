jQuery(document).ready(function(e){var c=10000,f=[[],[]],i=40,a=2,k=["Brian","Justin"];var m={grid:{hoverable:true},series:{shadowSize:4},yaxis:{min:-10,max:10},xaxis:{min:0,max:i*a,show:false}};var j=e.plot(e("#placeholder"),[{label:k[0],data:f[0]},{label:k[1],data:f[1]}],m);function b(){var n=e.Deferred();e.get("/poll/results",function(o){n.resolve(o)},"json");return n.promise()}function d(){b().done(function(n){h(f[0],n[0]);h(f[1],n[1]);j.setData([g(f[0]),g(f[1])]);j.draw();setTimeout(d,c)})}function h(n,o){if(n.length>i){n.shift()}n.push(o);return n}function g(p){var o=[];for(var n=0;n<p.length;++n){o.push([n*a,p[n]])}return o}d();var l=undefined;e(".upVote, .downVote").click(function(){var n=(e(this).hasClass("downVote")?1:2),o=e(this).data("sub-id");e.post("/poll/vote",{vote:n,subject:o},function(p){if(p.status=="voted"){if(l==undefined){l=window.setTimeout(function(){e("#votesRemaining").text("5");e(".upVote, .downVote").css("visibility","visible");l=undefined},60000)}e("#votesRemaining").text(p.votes_remaining);if(p.votes_remaining==0){e(".upVote, .downVote").css("visibility","hidden")}}},"json");return false})});